[tox]
envlist = py39,py310,py311,py312,py313,py314
isolated_build = true
requires = tox>=4.0.0

[testenv]
package = editable
deps =
    pytest>=7.0.0
    pytest-cov>=4.0.0
commands =
    python -m pytest --cov=resumable_upload --cov-report=term --cov-report=html -k "not test_flask and not test_fastapi and not test_django"

[testenv:lint]
package = skip
deps =
    ruff>=0.1.0
commands =
    python -m ruff check .
    python -m ruff format --check .

[testenv:web-frameworks]
package = editable
deps =
    pytest>=7.0.0
    flask>=2.0.0
    fastapi>=0.100.0
    httpx>=0.24.0
    django>=3.2.0
commands =
    python -m pytest tests/test_flask_integration.py -v || true
    python -m pytest tests/test_fastapi_integration.py -v || true
    python -m pytest tests/test_django_integration.py -v || true
